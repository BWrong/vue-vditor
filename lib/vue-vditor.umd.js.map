{"version":3,"file":"vue-vditor.umd.js","sources":["../src/config.ts","../src/index.vue","../src/index.ts"],"sourcesContent":["export const simpleConfig = [\n  'emoji',\n  'headings',\n  'bold',\n  'italic',\n  'strike',\n  'link',\n  '|',\n  'list',\n  'ordered-list',\n  'check',\n  'outdent',\n  'indent',\n  '|',\n  'quote',\n  'line',\n  'code',\n  'inline-code',\n  'insert-before',\n  'insert-after',\n  '|',\n  'table'\n];\nexport const mobileConfig = [\n  'emoji',\n  'link',\n  'upload',\n  'edit-mode',\n  {\n    name: 'more',\n    toolbar: ['insert-after', 'fullscreen', 'preview']\n  }\n];\nexport const defaultConfig = [\n  'emoji',\n  'headings',\n  'bold',\n  'italic',\n  'strike',\n  'link',\n  '|',\n  'list',\n  'ordered-list',\n  'check',\n  'outdent',\n  'indent',\n  '|',\n  'quote',\n  'line',\n  'code',\n  'inline-code',\n  'insert-before',\n  'insert-after',\n  '|',\n  'upload',\n  'record',\n  'table',\n  '|',\n  'undo',\n  'redo',\n  '|',\n  'fullscreen',\n  'edit-mode',\n  '|',\n  'content-theme',\n  'code-theme',\n  {\n    name: 'more',\n    toolbar: ['both', 'export', 'outline', 'preview', 'devtools']\n  }\n];\n","<template>\n  <div :id=\"editorId\" class=\"vue-vditor\"></div>\n</template>\n\n<script lang=\"ts\" setup>\nimport Vditor from 'vditor';\nimport 'vditor/dist/index.css';\nimport { defineEmit, defineProps, onMounted, ref, watch, toRaw, computed } from 'vue-demi';\nimport type { PropType } from 'vue-demi';\nimport { nanoid } from 'nanoid';\nimport { defaultConfig, simpleConfig, mobileConfig } from './config';\nconst props = defineProps({\n  mode: {\n    type: String as PropType<'simple' | 'full' | 'mobile'>,\n    default: 'full'\n  },\n  options: {\n    type: Object,\n    default: ()=>{}\n  },\n  modelValue: {\n    type: String,\n    default: ''\n  }\n});\nconst options = {\n  simple: simpleConfig,\n  full: defaultConfig,\n  mobile: mobileConfig\n};\nconst emit = defineEmit(['update:modelValue', 'after', 'focus', 'blur', 'esc', 'ctrlEnter', 'select']);\nconst editorId = 'vue-vditor-' + nanoid();\nconst contentEditor = ref<Vditor | null>(null);\nconst toolbarOptions = computed(() => options[props.mode]);\nlet preview = {\n  actions: ['desktop', 'tablet', 'mobile'],\n  ...(props?.options?.preview || {})\n};\nconsole.log(preview);\nonMounted(() => {\n  contentEditor.value = new Vditor(editorId, {\n    toolbar: toolbarOptions.value,\n    ...props.options,\n    preview,\n    value: props.modelValue,\n    after() {\n      // const previewElement = document.getElementById(editorId);\n      // const vditorContent = previewElement?.getElementsByClassName('vditor-content');\n      // if (vditorContent) {\n      //   vditorContent[0]?.addEventListener('click', (event: any) => {\n      //     console.log(111);\n      //     if (event.target.tagName === 'IMG') {\n      //       Vditor.previewImage(event.target);\n      //     }\n      //   });\n      // }\n      emit('after', toRaw(contentEditor.value));\n    },\n    input(value: string) {\n      emit('update:modelValue', value);\n    },\n    focus(value: string) {\n      emit('focus', value);\n    },\n    blur(value: string) {\n      emit('blur', value);\n    },\n    esc(value: string) {\n      emit('esc', value);\n    },\n    ctrlEnter(value: string) {\n      emit('ctrlEnter', value);\n    },\n    select(value: string) {\n      emit('select', value);\n    }\n  });\n});\nwatch(\n  () => props.modelValue,\n  (newVal) => contentEditor.value?.setValue(newVal)\n);\n</script>\n\n<style >\n.vditor-img__img img{\n  max-width: 100%;\n}\n</style>\n","import { App,Plugin } from 'vue'\nimport EditorComponent from './index.vue'\n// export const VueVditor = EditorComponent;\nexport default {\n  install(Vue: App) {\n    Vue.component('VueVditor',EditorComponent)\n  }\n} as Plugin\n"],"names":["nanoid","ref","computed","Vditor","toRaw","EditorComponent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAAa,eAAe;AAAA,IAC1B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;QAEW,eAAe;AAAA,IAC1B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,MACE,MAAM;AAAA,MACN,SAAS,CAAC,gBAAgB,cAAc;AAAA;AAAA;QAG/B,gBAAgB;AAAA,IAC3B;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,MACE,MAAM;AAAA,MACN,SAAS,CAAC,QAAQ,UAAU,WAAW,WAAW;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;YC3ChD,UAAU;AAAA,QACd,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,QAAQ;AAAA;YAGJ,WAAW,gBAAgBA;YAC3B,gBAAgBC,YAAmB;YACnC,iBAAiBC,iBAAS,MAAM,QAAQ,MAAM;UAChD,UAAU;AAAA,QACZ,SAAS,CAAC,WAAW,UAAU;AAAA,SAC3B,sCAAO,YAAP,mBAAgB,YAAW;cAEzB,IAAI;wBACF,MAAM;sBACA,QAAQ,IAAIC,2BAAO,UAAU;AAAA,UACzC,SAAS,eAAe;AAAA,WACrB,MAAM,UAFgC;AAAA,UAGzC;AAAA,UACA,OAAO,MAAM;AAAA,UACb,QAAQ;iBAWD,SAASC,cAAM,cAAc;AAAA;AAAA,UAEpC,MAAM,OAAe;iBACd,qBAAqB;AAAA;AAAA,UAE5B,MAAM,OAAe;iBACd,SAAS;AAAA;AAAA,UAEhB,KAAK,OAAe;iBACb,QAAQ;AAAA;AAAA,UAEf,IAAI,OAAe;iBACZ,OAAO;AAAA;AAAA,UAEd,UAAU,OAAe;iBAClB,aAAa;AAAA;AAAA,UAEpB,OAAO,OAAe;iBACf,UAAU;AAAA;AAAA;AAAA;oBAKnB,MAAM,MAAM,YACZ,CAAC;;AAAW,oCAAc,UAAd,oBAAqB,SAAS;AAAA;;;;;;;;;;cC7E7B;AAAA,IACb,QAAQ,KAAU;UACZ,UAAU,aAAYC;AAAAA;AAAAA;;;"}